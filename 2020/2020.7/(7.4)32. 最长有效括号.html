<!--
 * @Author: your name
 * @Date: 2020-07-04 17:22:13
 * @LastEditTime: 2020-07-08 17:45:20
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: /github/Algorithm/2020/2020.7/(7.4)32. 最长有效括号.html
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
  <script>
    /**
        给定一个只包含 '(' 和 ')' 的字符串，找出最长的包含有效括号的子串的长度。

示例 1:

输入: "(()"
输出: 2
解释: 最长有效括号子串为 "()"
示例 2:

输入: ")()())"
输出: 4
解释: 最长有效括号子串为 "()()"

来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/longest-valid-parentheses
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。
    */
    /**
     * @param {string} s
     * @return {number}
     */
    var longestValidParentheses = function (s) {
      var maxans = 0;
      var dp = new Array(s.length).fill(0);
      for (var i = 1; i < s.length; i++) {
        if (s[i] == ")") {
          if (s[i - 1] == "(") {
            dp[i] = (i >= 2 ? dp[i - 2] : 0) + 2;
          } else if (i - dp[i - 1] > 0 && s[i - dp[i - 1] - 1] == "(") {
            dp[i] =
              dp[i - 1] + (i - dp[i - 1] >= 2 ? dp[i - dp[i - 1] - 2] : 0) + 2;
          }
          maxans = Math.max(maxans, dp[i]);
        }
      }
      return maxans;
    };
    console.log(longestValidParentheses("()(()"));
  </script>
</html>
